<% include partials/_header %>

<div class="container mt-5">
  <div class="row">
    <div class="col-md-9">
      <table class="table table-bordered table-hover">
        <thead>
          <tr>
            <td>n°</td>
            <td>type</td>
            <td>etat</td>
            <td>nom</td>
            <td>desc</td>
            <td>num serie</td>
            <td>prix</td>
            <td>actions</td>
          </tr>
        </thead>
        <tbody>
          <% if (data) { %>
          <% for(var i = 0; i < data.length; i++) { %>
          <tr>
            <td><%= (i + 1) %></td>
            <td><%= data[i].type_id %></td>
            <td><%= data[i].etat_id %></td>
            <td><%= data[i].nom %></td>
            <td><%= data[i].description %></td>
            <td><%= data[i].numSerie %></td>
            <td><%= data[i].prix %></td>

            <td>
              <a href="locations/update/<%= data[i].id %>" class="btn btn-info">Modifier</a>
              <a href="locations/delete/<%= data[i].id %>" class="btn btn-danger">Supprimer</a>
            </td>
          </tr>
          <% } %>
          <% } %>
        </tbody>
      </table>
    </div>
    <div class="col-md-3">
      <div class="card-body">
        <% if (messages.error) { %>
        <p style="color:red"><%- messages.error %></p>
        <% } %>

        <% if (messages.success) { %>
        <p style="color:green"><%- messages.success %></p>
        <% } %>

        <form action="locations/add/<%= data.id %>" method="POST">
          <div class="form-group">
            <input type="number" name="type_id" placeholder="Id du type" class="form-control">
          </div>
          <div class="form-group">
            <input type="number" name="etat_id" placeholder="iD de l'état" class="form-control">
          </div>
          <div class="form-group">
            <input type="text" name="nom" placeholder="Nom" class="form-control" autofocus required>
          </div>
          <div class="form-group">
            <input type="text" name="description" placeholder="Description" class="form-control">
          </div>
          <div class="form-group">
            <input type="text" name="numSerie" placeholder="Numéro de série" class="form-control">
          </div>
          <div class="form-group">
            <input type="number" name="prix" placeholder="Prix location" class="form-control">
          </div>


          <button type="submit" class="btn btn-primary btn-rounded">
            Enregistrer
          </button>
        </form>
      </div>
    </div>
  </div>
</div>

<% include partials/_footer %>
<% include partials/_header %>

<div class="container mt-5">
  <div class="row">
    <div class="col-md-9">
      <table class="table table-bordered table-hover">
        <thead>
          <tr>
            <td>n°</td>
            <td>Nom</td>
            <td>Prénom</td>
			<td>Adresse</td>
			<td>Code Postal</td>
			<td>Genre</td>
			<td>Num Carte d'Identité</td>
			<td>Num Permis Conduire</td>
			<td>Rôle</td>
            <td>Email</td>
			<td>Mot de passe</td>
            <td>Actions</td>
          </tr>
        </thead>
        <tbody>
          <% if (data) { %>
            <% for(var i = 0; i < data.length; i++) { %>
              <tr>
                <td><%= (i + 1) %></td>
                <td><%= data[i].nom %></td>
                <td><%= data[i].prenom %></td>
				<td><%= data[i].adresse %></td>
                <td><%= data[i].codePostal %></td>
                <td><%= data[i].genre %></td>
				<td><%= data[i].numCarteIdentite %></td>
                <td><%= data[i].numPermisConduire %></td>
				<td><%= data[i].role %></td>
                <td><%= data[i].email %></td>
                <td><%= data[i].mdp %></td>
                <td>
                  <a href="/update/<%= data[i].id %>" class="btn btn-info">Modifier</a>
                  <a href="/delete/<%= data[i].id %>" class="btn btn-danger">Supprimer</a>
                </td>
              </tr>
            <% } %>
          <% } %>
        </tbody>
      </table>
    </div>
    <div class="col-md-3">
      <div class="card-body">
		<% if (messages.error) { %>
	  <p style="color:red"><%- messages.error %></p>
	<% } %>
	  
	<% if (messages.success) { %>
		<p style="color:green"><%- messages.success %></p>
	<% } %>
        <form action="/add" method="POST">
          <div class="form-group">
            <input type="text" name="nom" placeholder="Nom" class="form-control" autofocus required>
          </div>
          <div class="form-group">
            <input type="text" name="prenom" placeholder="Prenom" class="form-control">
          </div>
		  <div class="form-group">
            <input type="text" name="adresse" placeholder="Adresse" class="form-control" autofocus required>
          </div>
          <div class="form-group">
            <input type="text" name="codePostal" placeholder="Code Postal" class="form-control">
          </div>
          <div class="form-group">
            <input type="text" name="genre" placeholder="Genre" class="form-control">
          </div>
          <div class="form-group">
            <input type="text" name="telephone" placeholder="Téléphone" class="form-control">
          </div>
		  <div class="form-group">
            <input type="text" name="numCarteIdentite" placeholder="Num Carte d'Identite" class="form-control" autofocus required>
          </div>
          <div class="form-group">
            <input type="text" name="numPermisConduire" placeholder="Num Permis Conduire" class="form-control">
          </div>
          <div class="form-group">
            <input type="number" name="role" placeholder="" class="form-control">
          </div>
          <div class="form-group">
            <input type="email" name="email" placeholder="Email" class="form-control">
          </div>
		  <div class="form-group">
            <input type="password" name="mdp" placeholder="Mot de passe" class="form-control">
          </div>

          <button type="submit" class="btn btn-primary btn-rounded">
            Enregistrer
          </button>
        </form>
      </div>
    </div>
  </div>
</div>

<% include partials/_footer %>
